#!/bin/bash

# This script provides the main interface for interacting with the command line utilities used for
# configuring the behaviour of the Live Lightshow.
#
# Arguments: *see <reference file: error messages: "lightshow: Usage:">*
#
# Return status:
# 1 on incorrect usage, otherwise $? of the given subcommand


#-Preliminaries---------------------------------#


# CLI-SUPPORTING-FILES-FOLDER
readonly cli_supporting_files_folder="."

# Imports CLI utilities.
. "$cli_supporting_files_folder/Libraries/utilities.sh"
. "$cli_supporting_files_folder/Libraries/constants.sh"


#-Constants-------------------------------------#


# The function wrapping all constant-declarations for this script.
function declare_constants {
   # Binds the subcommand passed as first argument.
   readonly subcommand=$1
}


#-Main------------------------------------------#


declare_constants "$@"
# Shifts the given arguments to be passable to the subcommand.
shift

# Runs the script corresponding to the given subcommand, or prints and error message and returns on
# failure if the given subcommand was invalid.
case "$subcommand" in
   initialize) "$cli_supporting_files_folder/Scripts/push_program.sh" ;;
   start) "$cli_supporting_files_folder/Scripts/start_lightshow.sh" ;;
   *)
      echo -e "`message_for_ --lightshow-usage`"; exit 1 ;;
esac
